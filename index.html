<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button class="playerinput" id="rock">Rock</button>
    <button class="playerinput" id="paper">Paper</button>
    <button class="playerinput" id="scissors">Scissors</button>

    <div id="results-div">
        <p id="results"></p>
        <p id="total-score"></p>
    </div>

    <script>
        const rockPaperScissors = ['rock', 'paper', 'scissors'];
        const buttons = document.querySelectorAll('button');
        const div = document.querySelector('#results-div');
        const result = document.querySelector('#results');
        const scoreTally = document.querySelector('#total-score');

        buttons.forEach((button) => {
            button.addEventListener('click', () => {
                playerChoice = button.id;
                playRound(playerChoice);
            });
        });

        //playGame();

        function chooseComputer() {
            return rockPaperScissors[(Math.floor(Math.random() * 3))];
        }

        function playRound(playerSelection) {
            let computerSelection = chooseComputer();
            if (computerSelection == playerSelection) {
                result.textContent = `You and the computer both played ${playerSelection}. It's a draw!`;                               
                return 'draw'
            }
            else if ((playerSelection == 'rock' && computerSelection == 'paper') ||
                (playerSelection == 'paper' && computerSelection == 'scissors') ||
                (playerSelection == 'scissors' && computerSelection == 'rock')) {
                result.textContent = `You played ${playerSelection}, and the computer played ${computerSelection}. Computer wins!`;
                return 'computer'
            } else {
                result.textContent = `You played ${playerSelection}, and the computer played ${computerSelection}. You win!`;
                return 'player'
            }
        }

        function playGame() {
            let computerScore = 0;
            let playerScore = 0;
            while ((computerScore < 5) && (playerScore < 5)) {
                let result = playRound()
                if (result == 'computer') {
                    computerScore++;
                } else if (result == 'player') {
                    playerScore++
                }
                scoreTally.textContent = `Your current score is ${playerScore}, and the computer's current score is ${computerScore}.`;
            }
            if (computerScore == 5) {
                alert('Computer wins!')
            } else {
                alert('You win!')
            }
            let playAgain = confirm('Again?');
            if (playAgain == true) {
                playGame();
            }
        }
    </script>
</body>

</html>